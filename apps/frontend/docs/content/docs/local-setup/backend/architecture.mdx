---
title: Backend Architecture
description: System architecture and service communication.
---

Verifio's microservices architecture with ElysiaJS and Bun.

## Service Overview

```
Frontend → Caddy → Backend Services → Database/Cache
```

| Service | Port | Purpose |
|---------|------|---------|
| Auth | 8000 | Authentication & sessions |
| Verify | 8001 | Email verification |
| API Key | 8002 | API key management |
| Logs | 8003 | Activity logging |
| Upload | 8004 | File uploads |
| Credits | 8005 | Credit tracking |
| Tools | 8006 | Free tools |

## Communication Patterns

**Backend → Backend:** HTTP requests
```typescript
fetch('http://localhost:8005/api/credits/v1/deduct', {
  headers: { 'Cookie': headers.cookie },
  body: JSON.stringify({ amount: 100 }),
});
```

**Backend → Database:** Direct imports
```typescript
import { db } from "@verifio/db/client";
```

## Service Dependencies

- **Verify** → Auth, Credits, Logs
- **API Key** → Auth, Logs
- **Credits** → Auth, Logs
- **Upload** → Auth, Logs, Inngest
- **Tools** → Logs

## Shared Packages

| Package | Purpose |
|---------|---------|
| `@verifio/db` | Database schema & client |
| `@verifio/logger` | Structured logging |
| `@verifio/cache` | Redis caching |
| `@verifio/auth` | Authentication logic |

## Database Strategy

- **Single PostgreSQL instance**
- **Schema shared** via `@verifio/db`
- **All services** import from same package
- **Drizzle ORM** for type-safe queries

## Security Layers

1. **Rate Limiting** - IP, fingerprint, email, API key
2. **Authentication** - Session or API key required
3. **Authorization** - Organization-based access control
4. **Input Validation** - All inputs validated
5. **Audit Logging** - All actions logged

## Development Workflow

```bash
# Start infrastructure
bun run docker:up

# Start all services
bun run verifio:dev

# Or start individually
bun run be:auth:dev
bun run be:verify:dev
```
